<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Angular - Centralisation des icÃ´nes SVG</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div>
      <strong>ğŸ“š Documentation Angular &amp; NestJS</strong>
    </div>
    <nav class="navbar">
      <a href="index.html">Accueil</a>
      <a href="svg-icon-service.html" class="active">Service SVG Icons</a>
      <a href="endpoint-securise.html">Endpoint SÃ©curisÃ©</a>
      <a href="preprocesseur_css.html">PrÃ©processeur CSS</a>
      <a href="directives_scss.html">@ Directives SCSS</a>
    </nav>
  </header>

  <main>
    <h1>ğŸ§© Angular SvgIconService - Centralisation des icÃ´nes SVG</h1>

    <section>
      <h2>ğŸ¯ Objectif</h2>
      <p>Centraliser lâ€™enregistrement et lâ€™utilisation des icÃ´nes SVG personnalisÃ©es dans une application Angular avec <strong>MatIconRegistry</strong>.</p>
    </section>

    <section>
      <h2>ğŸ“ Arborescence recommandÃ©e</h2>
      <pre><code>src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ core/
â”‚       â””â”€â”€ services/
â”‚           â””â”€â”€ svg-icon.service.ts
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ icons/
â”‚       â”œâ”€â”€ calendar.svg
â”‚       â”œâ”€â”€ user.svg
â”‚       â”œâ”€â”€ edit.svg
â”‚       â”œâ”€â”€ trash.svg
â”‚       â”œâ”€â”€ image.svg
â”‚       â””â”€â”€ board.svg
</code></pre>
    </section>

    <section>
      <details><summary class="file-title">ğŸ“ svg-icon.service.ts</summary>
      <pre><code><span class="purple">import</span> { <span class="blue">Injectable</span> } <span class="purple">from</span> <span class="green">'@angular/core'</span>;
<span class="purple">import</span> { <span class="blue">MatIconRegistry</span> } <span class="purple">from</span> <span class="green">'@angular/material/icon'</span>;
<span class="purple">import</span> { <span class="blue">DomSanitizer</span> } <span class="purple">from</span> <span class="green">'@angular/platform-browser'</span>;

<span class="purple">@Injectable</span>({ providedIn: 'root' })
<span class="blue">export class</span> <span class="green">SvgIconService</span> {
  <span class="blue">private</span> icons = [
    'calendar',
    'user',
    'edit',
    'trash',
    'image',
    'board'
    <span class="purple">// Ajouter ici d'autres noms de fichiers SVG sans extension</span>
  ];

  <span class="blue">constructor</span>(
    <span class="blue">private</span> iconRegistry: MatIconRegistry,
    <span class="blue">private</span> sanitizer: DomSanitizer
  ) {
    this.registerIcons();
  }

  <span class="blue">private</span> registerIcons(): void {
    this.icons.forEach(icon =>
      this.iconRegistry.addSvgIcon(
        icon,
        this.sanitizer.bypassSecurityTrustResourceUrl(<span class="green">`assets/icons/${icon}.svg`</span>)
      )
    );
  }
}
</code></pre>
      <p>Ce service enregistre automatiquement tous les SVG listÃ©s dans <code>assets/icons/</code> pour les rendre disponibles dans lâ€™application.</p>
      </details>
    </section>

    <section>
      <h2>ğŸ’¡ Utilisation dans le HTML</h2>
      <pre><code>&lt;mat-icon svgIcon="calendar"&gt;&lt;/mat-icon&gt;
&lt;mat-icon svgIcon="user"&gt;&lt;/mat-icon&gt;
&lt;mat-icon svgIcon="edit"&gt;&lt;/mat-icon&gt;
</code></pre>
      <p>Il suffit dâ€™utiliser le nom du fichier SVG (sans extension) dans lâ€™attribut <code>svgIcon</code>.</p>
    </section>

    <section>
      <h2>ğŸ§© PrÃ©requis Angular Material</h2>
      <pre><code><span class="purple">import</span> { <span class="blue">MatIconModule</span> } <span class="purple">from</span> <span class="green">'@angular/material/icon'</span>;

<span class="purple">@NgModule</span>({
  imports: [
    MatIconModule,
    <span class="purple">// ...</span>
  ]
})
<span class="blue">export class</span> <span class="green">AppModule</span> { }
</code></pre>
      <p>Assure-toi que <code>MatIconModule</code> est bien importÃ© dans ton module Angular.</p>
    </section>

    <section>
      <h2>ğŸš€ Astuce bonus : chargement dynamique</h2>
      <p>Pour une solution Ã©volutive, charge dynamiquement la liste des icÃ´nes via un fichier JSON et <code>HttpClient</code> :</p>
      <pre><code>// assets/icons/icons.json
[
  "calendar",
  "user",
  "edit",
  "trash",
  "image",
  "board"
]
</code></pre>
      <pre><code><span class="purple">import</span> { <span class="blue">HttpClient</span> } <span class="purple">from</span> <span class="green">'@angular/common/http'</span>;
<span class="purple">import</span> { <span class="blue">firstValueFrom</span> } <span class="purple">from</span> <span class="green">'rxjs'</span>;

<span class="blue">constructor</span>(
  iconRegistry: MatIconRegistry,
  sanitizer: DomSanitizer,
  <span class="blue">private</span> http: HttpClient
) {
  this.http.get&lt;string[]&gt;('assets/icons/icons.json').subscribe(icons =&gt; {
    icons.forEach(icon =&gt;
      iconRegistry.addSvgIcon(
        icon,
        sanitizer.bypassSecurityTrustResourceUrl(`assets/icons/${icon}.svg`)
      )
    );
  });
}
</code></pre>
      <p>Tu peux ainsi ajouter ou retirer des icÃ´nes sans modifier le code source.</p>
    </section>
  </main>

  <footer>
    Â© 2024 Documentation Angular &amp; NestJS â€” Site statique pÃ©dagogique
  </footer>
</body>
</html>
